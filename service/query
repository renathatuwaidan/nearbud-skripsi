CREATE TABLE USERS (
	id_user varchar(5),
	created date,
	modified date,
	name varchar(255),
	username varchar(255),
	date_of_birth date,
	description varchar(255),
	email varchar(100),
	password varchar(50),
    primary key (id_user)
);

CREATE TABLE PROVINCE (
	id int not null,
	created date,
	modified date,
	name varchar(255),
	primary key (id)
)

CREATE TABLE CITY (
	id int not null,
	created date,
	modified date,
	id_province int not null,
	name varchar(255),
	primary key (id),
	foreign key (id_province) references province(id)
)

CREATE TABLE INTEREST (
	id int not null,
	created date,
	modified date,
	id_category int not null,
	interest varchar(100),
	primary key (id),
	foreign key (id_category) references category(id)
)

CREATE TABLE CATEGORY (
	id int not null,
	created date,
	modified date,
	category varchar(100),
	primary key (id)
)

CREATE TABLE SUSPENDED (
	id int not null,
	created date,
	modified date,
	id_reportee varchar(5) not null,
	deleted_time date,
	primary key (id),
	foreign key (id_reportee) references users(id_user)
);

CREATE TABLE REPORT_LINK(
	ID INT NOT NULL,
	CREATED date,
	MODIFIED date,
	ID_REPORTEE VARCHAR(5),
	ID_REPORTER VARCHAR(5),
	REPORT_TYPE VARCHAR(255),
	REPORT_DETAIL VARCHAR(255),
	PRIMARY KEY (ID),
	FOREIGN KEY (ID_REPORTEE) REFERENCES USERS(ID_USER),
	FOREIGN KEY (ID_REPORTER) REFERENCES USERS(ID_USER)
)

CREATE TABLE INTEREST_LINK(
	ID INT NOT NULL,
	CREATED date,
	MODIFIED date,
	ID_INTEREST INT,
	ID_USER VARCHAR(5),
	PRIMARY KEY (ID),
	FOREIGN KEY (ID_INTEREST) REFERENCES INTEREST(ID),
	FOREIGN KEY (ID_USER) REFERENCES USERS(ID_USER)
)

ALTER TABLE USERS ADD COLUMN ID_PROVINCE INT

ALTER TABLE USERS ADD COLUMN ID_CITY INT

ALTER TABLE USERS ADD FOREIGN KEY (ID_PROVINCE) REFERENCES PROVINCE(ID)

ALTER TABLE USERS ADD FOREIGN KEY (ID_CITY) REFERENCES CITY(ID)

CREATE TABLE EVENTS (
	ID VARCHAR(5) NOT NULL,
	PRIMARY KEY (ID,)
	CREATED date,
	MODIFIED date,
	ID_CATEGORY INT,
	FOREIGN KEY (ID_CATEGORY) REFERENCES CATEGORY(ID),
	ID_CREATOR VARCHAR(5),
	FOREIGN KEY (ID_CREATOR) REFERENCES USERS(ID_USER),
	NAME VARCHAR(255),
	DESCRIPTION VARCHAR(255),
	DATE DATE,
	DURATION INT,
	CITY_BASED INT,
	FOREIGN KEY (CITY_BASED) REFERENCES CITY(ID),
	LOCATION VARCHAR(255),
	ADDRESS VARCHAR(255),
	NUMBER_PARTICIPANT INT
)

CREATE TABLE EVENTS_ACTIVE (
	ID INT NOT NULL,
	CREATED date,
	MODIFIED date,
	ID_EVENT VARCHAR(5),
	FOREIGN KEY (ID_EVENT) REFERENCES EVENTS(ID),
	START_TIME DATE,
	DELETED_TIME DATE,
	PRIMARY KEY(ID)
)

CREATE TABLE EVENTS_LINK (
	ID INT NOT NULL,
	PRIMARY KEY(ID),
	CREATED date,
	MODIFIED date,
	ID_EVENT VARCHAR(5),
	FOREIGN KEY (ID_EVENT) REFERENCES EVENTS(ID),
	ID_USER VARCHAR(5),
	FOREIGN KEY (ID_USER) REFERENCES USERS(ID_USER),
	IS_APPROVED BOOL
)

-- on pending review
CREATE TABLE REVIEW (
	ID INT NOT NULL,
	PRIMARY KEY(ID),
	CREATED date,
	MODIFIED date,
	ID_REVIEWEE VARCHAR(5),
	FOREIGN KEY (ID_REVIEWEE) REFERENCES USERS(ID_USER),
	ID_REVIEWER VARCHAR(5),
	FOREIGN KEY (ID_REVIEWER) REFERENCES USERS(ID_USER),
	RATING VARCHAR(255),
	REVIEW VARCHAR(255)
)

CREATE TABLE COMMUNITY (
	ID_COMMUNITY VARCHAR(5) NOT NULL,
	PRIMARY KEY(ID_COMMUNITY),
	CREATED date,
	MODIFIED date,
	ID_PROVINCE INT,
	FOREIGN KEY (ID_PROVINCE) REFERENCES PROVINCE(ID),
	ID_CITY INT,
	FOREIGN KEY (ID_CITY) REFERENCES CITY(ID),
	NAME VARCHAR(5),
	DESCRIPTION VARCHAR(255)
)

CREATE TABLE COMMUNITY_library (
	ID INT NOT NULL, 
	PRIMARY KEY (ID),
	CREATED date,
	MODIFIED date,
	ID_CREATOR VARCHAR(5),
	FOREIGN KEY (ID_CREATOR) REFERENCES USERS(ID_USER), 
	ID_COMMUNITY varchar(5),
	FOREIGN KEY (ID_COMMUNITY) REFERENCES COMMUNITY(ID_community),
	CREATED_DATE DATE
)

CREATE TABLE COMMUNITY_bulletin (
	ID INT NOT NULL, 
	PRIMARY KEY (ID),
	CREATED date,
	MODIFIED date,
	ID_CREATOR VARCHAR(5),
	FOREIGN KEY (ID_CREATOR) REFERENCES USERS(ID_USER), 
	ID_COMMUNITY varchar(5),
	FOREIGN KEY (ID_COMMUNITY) REFERENCES COMMUNITY(ID_community),
	CREATED_DATE DATE,
	TITLE VARCHAR(255),
	BODY VARCHAR(255)
)

CREATE TABLE IS_ADMIN (
	ID INT NOT NULL, 
	PRIMARY KEY (ID),
	CREATED date,
	MODIFIED date,
	ID_USER VARCHAR(5),
	FOREIGN KEY (ID_USER) REFERENCES USERS(ID_USER), 
	ID_COMMUNITY varchar(5),
	FOREIGN KEY (ID_COMMUNITY) REFERENCES COMMUNITY(ID_community)
)

CREATE TABLE COMMUNITY_LINK (
	ID INT NOT NULL, 
	PRIMARY KEY (ID),
	CREATED date,
	MODIFIED date,
	ID_USER VARCHAR(5),
	FOREIGN KEY (ID_USER) REFERENCES USERS(ID_USER), 
	ID_COMMUNITY varchar(5),
	FOREIGN KEY (ID_COMMUNITY) REFERENCES COMMUNITY(ID_community),
	IS_APPROVE BOOL
)